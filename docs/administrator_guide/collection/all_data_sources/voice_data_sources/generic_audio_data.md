---
layout: default
title: Generic Audio Data Source
nav_exclude: true
---

# Generic Audio Data Source
{: .no_toc }

Audio data from any source can be processed, transcribed, and ingested if provided in one of our standard supported formats and structures.
{: .fs-6 .fw-300 }

1. TOC
{:toc}

---

## Overview
Although audio data can be retrieved directly from the most common audio data channels through our standard audio data sources, we understand that some users either do not want Trace to connect directly to these sources or are using unique call recording capabilities that do not support direct connect. For these cases, data can still be processed, transcribed, and ingested as long as it's provided to Trace in one of our standard supported formats and structures.


### Supported Formats and Structures
Two formats are currently supported for generic audio data. There is a JSON format and an XML format. The JSON format is preferred, while the XML format should be used only as a secondary option.

Two files are required for a successful ingestion:
1. A media file: audio_file.wav (.mp3 is also supported but not preferred)
2. A metadata file: audio_file.json (.xml is also supported but not preferred)

Both the media file and the metadata file **must** have the exact same name to ensure proper correlations within the system.
{: .warn }


### JSON Metadata File Format

#### JSON Template
```json
{
    "Recording": {
        "id": "10000022203",       
        "created": "2021-07-13T16:12:53.811012",
        "md5": "a73cb85a77a2faddf9a10e538192609b",
        "mediaType": "MPEG-1 Audio Layer 3",
        "fileExtenstion": "mp3"
    },
    "Metadata": {
        "end": "2021-07-13T16:12:53.811012",
        "start": "2021-07-13T16:14:59.811012",
        "duration": "120000",
        "direction": "in",
        "channels": [
            {
                "id": 0,
                "userID": "John.Doe@domain.com",
                "userName": "John Doe",
                "deviceID": "+48223416489",
                "deviceName": "JDOEDESK6489",
                "joined": "",
                "left": ""
            },
        ]
    }
}
```

#### JSON Recording Section Details

| Name  | Required      | Parent | Description |
|:-------:|:------------------:|:-------:|:------------------:|
| id |  Required | NA | A globally unique identifier for the recording. |
| created |  Required | NA | ISO 8601 format datetime string representing the point in time when the metadata file was constructed. |
| md5 |  Required | NA | 128-bit hash of the media file generated by the MD5 algorithm. |
| mediaType |  Optional | NA | A media type for the media file. This should be completed if known, but implementations should not attempt to detect or guess a mime type. |
| fileExtension |  Required | NA | A file extension for the media file. |


#### JSON Metadata Section Details

| Name  | Required      | Parent | Description |
|:-------:|:------------------:|:-------:|:------------------:|
| end |  Required | NA | ISO 8601 format datetime string representing the point in time when the call terminated. If this information is not available then a filesystem timestamp of the recording file can be substituted. |
| start |  Optional | NA | ISO 8601 format datetime string representing the point in time when the call started. If not populated a start will be calculated using the end and duration. |
| duration |  Optional | NA | Number representing total milliseconds of the call. No fractional values should be provided. If not populated a duration will be calculated from the media file. |
| direction |  Optional | NA | String "in" or "out" representing the direction of the call as observed by the recorder. No other values are permitted. |
| channels |  Optional | NA | An array of objects, each representing a single audio channel in the media file. If no information is available this array should be empty. |
| id |  Required | channels | Number corresponding the numbered channel in the media file. |
| userID |  Required | channels | String containing a globally unique identifier for the call participant. This will be used to match the participant across all recordings. |
| userName |  Optional | channels | A human-readable display name for the participant. |
| deviceID |  Required | channels | String containing a globally unique identifier for the device. This will be used to match the device across all recordings. |
| deviceName |  Optional | channels | A human-readable display name for the participant. |
| joined |  Optional | channels | ISO 8601 format datetime string representing the point in time when the participant joined the call. |
| left |  Optional | channels | ISO 8601 format datetime string representing the point in time when the participant joined the call. |


### XML Generic Audio Format

#### XML Template

```xml
<?xml version="1.0" encoding="UTF-8"?>
<CAudioFile xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <CRI>
    <LocalStartTime>2017-10-17T11:04:00.4000000-0400</LocalStartTime>
    <LocalEndTime>2017-10-17T11:04:53.4000000-0400</LocalEndTime>
    <AgentPBXID>John.Doe@domain.com</AgentPBXID>
    <Extension>+48223416489</Extension>
    <Duration>53000</Duration>
    <Direction>in</Direction>
    <DataSourceName>ABC Call Recorder Data Center</DataSourceName>
  </CRI>
  <Agent>
    <Name>John Doe</Name>
  </Agent>
</CAudioFile>
```

#### XML CRI Section Details

| Name  | Required      | Parent | Description |
|:-------:|:------------------:|:-------:|:------------------:|
| LocalStartTime |  Required | CRI | YYYY-MM-DDTHH:mm:ss.ms+TimeZoneOffset format (e.g 2017-10-17T11:04:00.4000000-0400) datetime string representing the point in time when the call started. If not populated a start will be calculated using the end and duration. |
| LocalEndTime |  Required | CRI | YYYY-MM-DDTHH:mm:ss.ms+TimeZoneOffset format (e.g 2017-10-17T11:04:00.4000000-0400)datetime string representing the point in time when the call terminated. If this information is not available then a filesystem timestamp of the recording file can be substituted. |
| AgentPBXID |  Required | CRI | String containing a globally unique identifier for the call participant. This will be used to match the participant across all recordings. |
| Extension |  Required | CRI | String containing a globally unique identifier for the device. This will be used to match the device across all recordings. |
| Duration |  Optional | CRI | Number representing total milliseconds of the call. No fractional values should be provided. If not populated a duration will be calculated from the media file. |
| Direction |  Optional | CRI | String "in" or "out" representing the direction of the call as observed by the recorder. No other values are permitted. |
| Channel |  Optional | CRI | help |
| DataSourceName |  Optional | CRI | A human-readable display name for the origin data source that the media was retrieved from. |

#### XML Agent Section Details

| Name  | Required      | Parent | Description |
|:-------:|:------------------:|:-------:|:------------------:|
| Name |  Required | Agent | A human-readable display name for the participant. |

All non-required tags in the XML will be added to the `Other Metadata` field and will not be mapped to fields.
{: .info }